local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "LARB HACK | Blox Fruits Ultimate",
   LoadingTitle = "AA-7.0 Optimization",
   LoadingSubtitle = "By LARB SYSTEM",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "LarbHackConfig",
      FileName = "BloxFruits"
   },
   KeySystem = false,
})

local MainTab = Window:CreateTab("Main Farm", 4483362458)
local StatsTab = Window:CreateTab("Stats", 4483362458)
local MiscTab = Window:CreateTab("Misc", 4483362458)

-- Variables
_G.AutoFarm = false
_G.AutoChest = false
_G.AutoStats = false
_G.SelectStat = "Melee" -- Melee, Defense, Sword, Gun, Demon Fruit

-- Quest Data (Mock Data - In a full script this would be a huge table)
local QuestData = {
    [1] = {Level = 1, Name = "Bandit", QuestName = "BanditQuest1", CFrame = CFrame.new(1059.37, 16.37, 1549.14)},
    [2] = {Level = 15, Name = "Monkey", QuestName = "JungleQuest", CFrame = CFrame.new(-1598.08, 35.55, 153.8)},
    -- Add more quests as needed
}

-- Helper Functions
local function GetQuestData()
    local level = game.Players.LocalPlayer.Data.Level.Value
    local currentQuest = nil
    for _, quest in pairs(QuestData) do
        if level >= quest.Level then
            currentQuest = quest
        end
    end
    return currentQuest
end

local function TweenTo(targetCFrame)
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local distance = (targetCFrame.Position - character.HumanoidRootPart.Position).Magnitude
    local speed = 300
    local tweenInfo = TweenInfo.new(distance / speed, Enum.EasingStyle.Linear)
    local tween = game:GetService("TweenService"):Create(character.HumanoidRootPart, tweenInfo, {CFrame = targetCFrame})
    tween:Play()
    tween.Completed:Wait()
end

local function CheckQuest()
    local player = game.Players.LocalPlayer
    local myQuest = player.PlayerGui.Main.Quest.Container.QuestTitle.Title.Text
    return myQuest ~= ""
end

-- Auto Farm Logic
spawn(function()
    while wait() do
        if _G.AutoFarm then
            pcall(function()
                local player = game.Players.LocalPlayer
                local character = player.Character or player.CharacterAdded:Wait()
                local currentQuestData = GetQuestData()
                
                if currentQuestData then
                    if not CheckQuest() then
                        -- Teleport to Quest Giver
                        -- This needs real Quest Giver locations, using simplified logic here
                         -- TweenTo(QuestGiverLocation)
                        
                        -- Accept Quest
                        local args = {
                            [1] = "StartQuest",
                            [2] = currentQuestData.QuestName,
                            [3] = 1
                        }
                        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                    else
                        -- Quest Active, Find Mob
                        for _, v in pairs(game:GetService("Workspace").Enemies:GetChildren()) do
                            if v.Name == currentQuestData.Name and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                                -- Tween to mob
                                character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 5, 0) -- Simplified for performance
                                
                                -- Auto Click
                                game:GetService("VirtualUser"):CaptureController()
                                game:GetService("VirtualUser"):Button1Down(Vector2.new(1280, 672))
                                
                                -- Skill Spam (Simple)
                                -- game:GetService("VirtualInputManager"):SendKeyEvent(true, "Z", false, game)
                                -- game:GetService("VirtualInputManager"):SendKeyEvent(true, "X", false, game)
                                
                                -- Fast Attack Mock
                                v.Humanoid.Health = 0 -- Instant Kill Simulation
                            end
                        end
                    end
                end
            end)
        end
    end
end)

-- Auto Chest Logic
spawn(function()
    while wait(0.5) do
        if _G.AutoChest then
            pcall(function()
                for _, v in pairs(game:GetService("Workspace"):GetChildren()) do
                    if v.Name:find("Chest") then
                        local player = game.Players.LocalPlayer
                        local character = player.Character or player.CharacterAdded:Wait()
                        character.HumanoidRootPart.CFrame = v.CFrame
                        wait(0.2)
                    end
                end
            end)
        end
    end
end)

-- Auto Stats Logic
spawn(function()
    while wait(0.5) do
        if _G.AutoStats then
            pcall(function()
                local args = {
                    [1] = "AddPoint",
                    [2] = _G.SelectStat,
                    [3] = 1
                }
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
            end)
        end
    end
end)


-- UI Elements
MainTab:CreateToggle({
   Name = "Auto Farm Level",
   CurrentValue = false,
   Callback = function(Value)
      _G.AutoFarm = Value
   end,
})

MainTab:CreateToggle({
   Name = "Auto Farm Chests",
   CurrentValue = false,
   Callback = function(Value)
      _G.AutoChest = Value
   end,
})

StatsTab:CreateDropdown({
   Name = "Select Stat",
   Options = {"Melee", "Defense", "Sword", "Gun", "Demon Fruit"},
   CurrentOption = "Melee",
   Callback = function(Option)
      _G.SelectStat = Option
   end,
})

StatsTab:CreateToggle({
   Name = "Auto Upgrade Stats",
   CurrentValue = false,
   Callback = function(Value)
      _G.AutoStats = Value
   end,
})

MiscTab:CreateSlider({
   Name = "WalkSpeed",
   Range = {16, 300},
   Increment = 1,
   Suffix = "Speed",
   CurrentValue = 16,
   Callback = function(Value)
      game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = Value
   end,
})

MiscTab:CreateSlider({
   Name = "JumpPower",
   Range = {50, 500},
   Increment = 1,
   Suffix = "Power",
   CurrentValue = 50,
   Callback = function(Value)
      game.Players.LocalPlayer.Character.Humanoid.JumpPower = Value
   end,
})
