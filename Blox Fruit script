--[[
    VETA HUB - BLOX FRUITS GOD MODE
    Version: 6.0 (UI Remaster + Advanced ESP + AutoFarm Fix)
    Author: VETA AI
]]

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local VirtualInputManager = game:GetService("VirtualInputManager")
local HttpService = game:GetService("HttpService")

local Player = Players.LocalPlayer
local Mouse = Player:GetMouse()

--// UI CONFIGURATION
local UIConfig = {
    MainColor = Color3.fromRGB(0, 120, 255), -- Bright Blue
    Background = Color3.fromRGB(20, 20, 30), -- Dark Blue-Grey
    Sidebar = Color3.fromRGB(15, 15, 25),
    Text = Color3.fromRGB(255, 255, 255),
    Font = Enum.Font.GothamBold,
    Transparency = 0.1
}

--// GAME VARIABLES
_G.Config = {
    AutoFarm = false,
    AutoStats = false,
    SelectedStat = "Melee",
    FastAttack = true,
    MobAura = true,
    ESP = false,
    FruitESP = false,
    ChestESP = false,
    SelectedWeapon = "Melee", -- Can be specific tool name
    RefreshWeapons = false
}

local CurrentStatus = "Waiting..."

--// QUEST DATA (EXPANDED)
local QuestData = {
    {Lvl = 0, NPC = "Bandit Quest Giver", Mob = "Bandit", Quest = "BanditQuest1"},
    {Lvl = 10, NPC = "Monkey Quest Giver", Mob = "Monkey", Quest = "JungleQuest"},
    {Lvl = 15, NPC = "Gorilla Quest Giver", Mob = "Gorilla", Quest = "JungleQuest"},
    {Lvl = 30, NPC = "Pirate Adventurer", Mob = "Pirate", Quest = "BuggyQuest1"},
    {Lvl = 40, NPC = "Pirate Adventurer", Mob = "Brute", Quest = "BuggyQuest1"},
    {Lvl = 60, NPC = "Desert Adventurer", Mob = "Desert Bandit", Quest = "DesertQuest"},
    {Lvl = 75, NPC = "Desert Adventurer", Mob = "Desert Officer", Quest = "DesertQuest"},
    {Lvl = 90, NPC = "Snowman", Mob = "Snow Bandit", Quest = "SnowQuest"},
    {Lvl = 100, NPC = "Snowman", Mob = "Snowman", Quest = "SnowQuest"},
    {Lvl = 120, NPC = "Marine Quest Giver", Mob = "Chief Petty Officer", Quest = "MarineQuest2"},
    {Lvl = 150, NPC = "Sky Quest Giver", Mob = "Sky Bandit", Quest = "SkyQuest"},
    {Lvl = 175, NPC = "Sky Quest Giver", Mob = "Dark Master", Quest = "SkyQuest"},
    {Lvl = 190, NPC = "Prisoner Quest Giver", Mob = "Prisoner", Quest = "PrisonerQuest"},
    {Lvl = 210, NPC = "Prisoner Quest Giver", Mob = "Dangerous Prisoner", Quest = "PrisonerQuest"},
    {Lvl = 225, NPC = "Colosseum Quest Giver", Mob = "Toga Warrior", Quest = "ColosseumQuest"},
    {Lvl = 250, NPC = "Colosseum Quest Giver", Mob = "Gladiator", Quest = "ColosseumQuest"},
    {Lvl = 300, NPC = "Magma Quest Giver", Mob = "Military Soldier", Quest = "MagmaQuest"},
    {Lvl = 325, NPC = "Magma Quest Giver", Mob = "Military Spy", Quest = "MagmaQuest"},
    {Lvl = 375, NPC = "Fishman Lord", Mob = "Fishman Warrior", Quest = "FishmanQuest"},
    {Lvl = 400, NPC = "Fishman Lord", Mob = "Fishman Commando", Quest = "FishmanQuest"},
    {Lvl = 450, NPC = "God's Guard", Mob = "God's Guard", Quest = "SkyQuest2"},
    {Lvl = 475, NPC = "God's Guard", Mob = "Shanda", Quest = "SkyQuest2"},
    {Lvl = 500, NPC = "God's Guard", Mob = "Wysper", Quest = "SkyQuest2"},
    {Lvl = 525, NPC = "God's Guard", Mob = "Royal Squad", Quest = "SkyQuest2"},
    {Lvl = 550, NPC = "God's Guard", Mob = "Royal Soldier", Quest = "SkyQuest2"},
    {Lvl = 625, NPC = "Galley Captain", Mob = "Galley Pirate", Quest = "FountainQuest"},
    {Lvl = 650, NPC = "Galley Captain", Mob = "Galley Captain", Quest = "FountainQuest"}
}

--// HELPER FUNCTIONS
local function UpdateStatus(text)
    CurrentStatus = text
end

local function GetWeaponList()
    local weapons = {}
    if Player.Backpack then
        for _, v in pairs(Player.Backpack:GetChildren()) do
            if v:IsA("Tool") then
                table.insert(weapons, v.Name)
            end
        end
    end
    if Player.Character then
        for _, v in pairs(Player.Character:GetChildren()) do
            if v:IsA("Tool") then
                table.insert(weapons, v.Name)
            end
        end
    end
    return weapons
end

local function EquipWeapon(name)
    local Backpack = Player.Backpack
    local Char = Player.Character
    
    if Char and Char:FindFirstChild(name) then return end -- Already equipped
    
    if Backpack and Backpack:FindFirstChild(name) then
        Char.Humanoid:EquipTool(Backpack[name])
    end
end

local function CheckQuest()
    local MyLvl = Player.Data.Level.Value
    local BestQuest = QuestData[1]
    
    for _, v in pairs(QuestData) do
        if MyLvl >= v.Lvl then
            BestQuest = v
        end
    end
    return BestQuest
end

local function Tween(TargetCF)
    if not Player.Character or not Player.Character:FindFirstChild("HumanoidRootPart") then return end
    
    local HRP = Player.Character.HumanoidRootPart
    
    -- Anti-Fall
    if not HRP:FindFirstChild("VetaFly") then
        local BV = Instance.new("BodyVelocity")
        BV.Name = "VetaFly"
        BV.MaxForce = Vector3.new(1e5, 1e5, 1e5)
        BV.Velocity = Vector3.zero
        BV.Parent = HRP
    end
    
    local Distance = (HRP.Position - TargetCF.Position).Magnitude
    local Speed = 350
    local Time = Distance / Speed
    
    local TInfo = TweenInfo.new(Time, Enum.EasingStyle.Linear)
    local Tween = TweenService:Create(HRP, TInfo, {CFrame = TargetCF})
    Tween:Play()
    
    -- Noclip
    for _, v in pairs(Player.Character:GetChildren()) do
        if v:IsA("BasePart") then v.CanCollide = false end
    end
    
    return Tween, Time
end

--// VETA UI LIBRARY (REMASTERED)
local Library = {}

function Library:CreateWindow(name)
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "VetaHub_V6"
    ScreenGui.Parent = CoreGui
    ScreenGui.ResetOnSpawn = false

    -- Open/Close Button
    local OpenBtn = Instance.new("TextButton")
    OpenBtn.Name = "OpenButton"
    OpenBtn.Parent = ScreenGui
    OpenBtn.BackgroundColor3 = UIConfig.MainColor
    OpenBtn.Position = UDim2.new(0, 20, 0.5, -25)
    OpenBtn.Size = UDim2.new(0, 50, 0, 50)
    OpenBtn.Font = UIConfig.Font
    OpenBtn.Text = "V"
    OpenBtn.TextColor3 = Color3.new(1,1,1)
    OpenBtn.TextSize = 24
    
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(1, 0)
    UICorner.Parent = OpenBtn
    
    local UIStroke = Instance.new("UIStroke")
    UIStroke.Parent = OpenBtn
    UIStroke.Color = Color3.new(1,1,1)
    UIStroke.Thickness = 2
    UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    -- Main Window
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Parent = ScreenGui
    MainFrame.BackgroundColor3 = UIConfig.Background
    MainFrame.BackgroundTransparency = UIConfig.Transparency
    MainFrame.Position = UDim2.new(0.5, -325, 0.5, -225)
    MainFrame.Size = UDim2.new(0, 650, 0, 450)
    MainFrame.ClipsDescendants = true
    MainFrame.Visible = false
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 10)
    MainCorner.Parent = MainFrame

    local MainStroke = Instance.new("UIStroke")
    MainStroke.Parent = MainFrame
    MainStroke.Color = UIConfig.MainColor
    MainStroke.Thickness = 1
    
    -- Status Bar
    local StatusBar = Instance.new("TextLabel")
    StatusBar.Parent = MainFrame
    StatusBar.BackgroundTransparency = 1
    StatusBar.Position = UDim2.new(0, 170, 0, 10)
    StatusBar.Size = UDim2.new(0, 400, 0, 30)
    StatusBar.Font = UIConfig.Font
    StatusBar.Text = "Status: Idle"
    StatusBar.TextColor3 = Color3.fromRGB(100, 255, 100)
    StatusBar.TextSize = 16
    StatusBar.TextXAlignment = Enum.TextXAlignment.Left

    -- Sidebar
    local Sidebar = Instance.new("Frame")
    Sidebar.Parent = MainFrame
    Sidebar.BackgroundColor3 = UIConfig.Sidebar
    Sidebar.Size = UDim2.new(0, 160, 1, 0)
    
    local SidebarCorner = Instance.new("UICorner")
    SidebarCorner.CornerRadius = UDim.new(0, 10)
    SidebarCorner.Parent = Sidebar
    
    local Title = Instance.new("TextLabel")
    Title.Parent = Sidebar
    Title.BackgroundTransparency = 1
    Title.Position = UDim2.new(0, 0, 0, 20)
    Title.Size = UDim2.new(1, 0, 0, 30)
    Title.Font = UIConfig.Font
    Title.Text = "VETA HUB"
    Title.TextColor3 = UIConfig.MainColor
    Title.TextSize = 24
    
    local TabContainer = Instance.new("ScrollingFrame")
    TabContainer.Parent = Sidebar
    TabContainer.BackgroundTransparency = 1
    TabContainer.Position = UDim2.new(0, 10, 0, 80)
    TabContainer.Size = UDim2.new(1, -20, 1, -90)
    TabContainer.ScrollBarThickness = 0
    
    local UIList = Instance.new("UIListLayout")
    UIList.Parent = TabContainer
    UIList.Padding = UDim.new(0, 10)
    
    -- Content
    local Content = Instance.new("Frame")
    Content.Parent = MainFrame
    Content.BackgroundTransparency = 1
    Content.Position = UDim2.new(0, 170, 0, 50)
    Content.Size = UDim2.new(1, -180, 1, -60)
    
    -- Dragging
    local dragging, dragInput, dragStart, startPos
    MainFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then dragging = false end
            end)
        end
    end)
    MainFrame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then dragInput = input end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    -- Toggle UI
    local toggled = false
    OpenBtn.MouseButton1Click:Connect(function()
        toggled = not toggled
        MainFrame.Visible = toggled
    end)

    local Window = {}
    local FirstTab = true

    function Window:Tab(text)
        local TabBtn = Instance.new("TextButton")
        TabBtn.Parent = TabContainer
        TabBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
        TabBtn.Size = UDim2.new(1, 0, 0, 40)
        TabBtn.Font = UIConfig.Font
        TabBtn.Text = text
        TabBtn.TextColor3 = UIConfig.Text
        TabBtn.TextSize = 14
        
        local TCorner = Instance.new("UICorner")
        TCorner.CornerRadius = UDim.new(0, 6)
        TCorner.Parent = TabBtn
        
        local TabPage = Instance.new("ScrollingFrame")
        TabPage.Parent = Content
        TabPage.Size = UDim2.new(1, 0, 1, 0)
        TabPage.BackgroundTransparency = 1
        TabPage.ScrollBarThickness = 2
        TabPage.Visible = FirstTab
        
        local PList = Instance.new("UIListLayout")
        PList.Parent = TabPage
        PList.Padding = UDim.new(0, 8)
        PList.SortOrder = Enum.SortOrder.LayoutOrder
        
        if FirstTab then
            TabBtn.BackgroundColor3 = UIConfig.MainColor
            FirstTab = false
        end
        
        TabBtn.MouseButton1Click:Connect(function()
            for _, v in pairs(Content:GetChildren()) do v.Visible = false end
            TabPage.Visible = true
            
            for _, v in pairs(TabContainer:GetChildren()) do
                if v:IsA("TextButton") then
                    TweenService:Create(v, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(30, 30, 40)}):Play()
                end
            end
            TweenService:Create(TabBtn, TweenInfo.new(0.2), {BackgroundColor3 = UIConfig.MainColor}):Play()
        end)
        
        local Elements = {}
        
        function Elements:Toggle(text, default, callback)
            local Frame = Instance.new("Frame")
            Frame.Parent = TabPage
            Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
            Frame.Size = UDim2.new(1, -5, 0, 45)
            
            local Corner = Instance.new("UICorner")
            Corner.CornerRadius = UDim.new(0, 6)
            Corner.Parent = Frame
            
            local Label = Instance.new("TextLabel")
            Label.Parent = Frame
            Label.BackgroundTransparency = 1
            Label.Position = UDim2.new(0, 15, 0, 0)
            Label.Size = UDim2.new(0.7, 0, 1, 0)
            Label.Font = UIConfig.Font
            Label.Text = text
            Label.TextColor3 = UIConfig.Text
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.TextSize = 14
            
            local Btn = Instance.new("TextButton")
            Btn.Parent = Frame
            Btn.BackgroundColor3 = default and UIConfig.MainColor or Color3.fromRGB(50, 50, 60)
            Btn.Position = UDim2.new(1, -55, 0.5, -12)
            Btn.Size = UDim2.new(0, 44, 0, 24)
            Btn.Text = ""
            
            local BCorner = Instance.new("UICorner")
            BCorner.CornerRadius = UDim.new(1, 0)
            BCorner.Parent = Btn
            
            local Circle = Instance.new("Frame")
            Circle.Parent = Btn
            Circle.BackgroundColor3 = Color3.new(1,1,1)
            Circle.Position = default and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 2, 0.5, -10)
            Circle.Size = UDim2.new(0, 20, 0, 20)
            
            local CCorner = Instance.new("UICorner")
            CCorner.CornerRadius = UDim.new(1, 0)
            CCorner.Parent = Circle
            
            local active = default
            Btn.MouseButton1Click:Connect(function()
                active = not active
                
                local goalColor = active and UIConfig.MainColor or Color3.fromRGB(50, 50, 60)
                local goalPos = active and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 2, 0.5, -10)
                
                TweenService:Create(Btn, TweenInfo.new(0.2), {BackgroundColor3 = goalColor}):Play()
                TweenService:Create(Circle, TweenInfo.new(0.2), {Position = goalPos}):Play()
                
                callback(active)
            end)
        end
        
        function Elements:Button(text, callback)
            local Btn = Instance.new("TextButton")
            Btn.Parent = TabPage
            Btn.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
            Btn.Size = UDim2.new(1, -5, 0, 40)
            Btn.Font = UIConfig.Font
            Btn.Text = text
            Btn.TextColor3 = UIConfig.Text
            Btn.TextSize = 14
            
            local Corner = Instance.new("UICorner")
            Corner.CornerRadius = UDim.new(0, 6)
            Corner.Parent = Btn
            
            Btn.MouseButton1Click:Connect(function()
                TweenService:Create(Btn, TweenInfo.new(0.1), {BackgroundColor3 = UIConfig.MainColor}):Play()
                task.wait(0.1)
                TweenService:Create(Btn, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(30, 30, 40)}):Play()
                callback()
            end)
        end
        
        function Elements:Dropdown(text, options, callback)
            local Frame = Instance.new("Frame")
            Frame.Parent = TabPage
            Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
            Frame.Size = UDim2.new(1, -5, 0, 40)
            Frame.ClipsDescendants = true
            
            local Corner = Instance.new("UICorner")
            Corner.CornerRadius = UDim.new(0, 6)
            Corner.Parent = Frame
            
            local Label = Instance.new("TextLabel")
            Label.Parent = Frame
            Label.BackgroundTransparency = 1
            Label.Position = UDim2.new(0, 15, 0, 0)
            Label.Size = UDim2.new(0.7, 0, 0, 40)
            Label.Font = UIConfig.Font
            Label.Text = text
            Label.TextColor3 = UIConfig.Text
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.TextSize = 14
            
            local ToggleBtn = Instance.new("TextButton")
            ToggleBtn.Parent = Frame
            ToggleBtn.BackgroundTransparency = 1
            ToggleBtn.Size = UDim2.new(1, 0, 0, 40)
            ToggleBtn.Text = ""
            
            local List = Instance.new("UIListLayout")
            List.Parent = Frame
            List.SortOrder = Enum.SortOrder.LayoutOrder
            List.Padding = UDim.new(0, 5)
            
            -- Spacer
            local Spacer = Instance.new("Frame")
            Spacer.Parent = Frame
            Spacer.BackgroundTransparency = 1
            Spacer.Size = UDim2.new(1, 0, 0, 40)
            Spacer.LayoutOrder = 0
            
            local open = false
            
            local function RefreshOptions()
                -- Clear old
                for _, v in pairs(Frame:GetChildren()) do
                    if v:IsA("TextButton") and v ~= ToggleBtn then v:Destroy() end
                end
                
                for i, opt in ipairs(options) do
                    local OptBtn = Instance.new("TextButton")
                    OptBtn.Parent = Frame
                    OptBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
                    OptBtn.Size = UDim2.new(1, -20, 0, 30)
                    OptBtn.Font = UIConfig.Font
                    OptBtn.Text = opt
                    OptBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
                    OptBtn.TextSize = 13
                    OptBtn.LayoutOrder = i
                    
                    local OCorner = Instance.new("UICorner")
                    OCorner.CornerRadius = UDim.new(0, 4)
                    OCorner.Parent = OptBtn
                    
                    OptBtn.MouseButton1Click:Connect(function()
                        Label.Text = text .. ": " .. opt
                        callback(opt)
                        open = false
                        TweenService:Create(Frame, TweenInfo.new(0.3), {Size = UDim2.new(1, -5, 0, 40)}):Play()
                    end)
                end
            end
            
            RefreshOptions()
            
            ToggleBtn.MouseButton1Click:Connect(function()
                open = not open
                if open then
                    TweenService:Create(Frame, TweenInfo.new(0.3), {Size = UDim2.new(1, -5, 0, 40 + (#options * 35) + 10)}):Play()
                else
                    TweenService:Create(Frame, TweenInfo.new(0.3), {Size = UDim2.new(1, -5, 0, 40)}):Play()
                end
            end)
            
            return {
                Refresh = function(newOptions)
                    options = newOptions
                    RefreshOptions()
                end
            }
        end
        
        return Elements
    end
    
    return Window, StatusBar
end

--// MAIN
local Win, StatusBar = Library:CreateWindow("VETA HUB V6")

local FarmTab = Win:Tab("Auto Farm")
local WeaponDrop = FarmTab:Dropdown("Select Weapon", {"Melee", "Sword"}, function(v)
    _G.Config.SelectedWeapon = v
end)

FarmTab:Button("Refresh Weapons (Click Me)", function()
    local tools = GetWeaponList()
    WeaponDrop.Refresh(tools)
end)

FarmTab:Toggle("Enable Auto Farm", false, function(v)
    _G.Config.AutoFarm = v
end)

FarmTab:Toggle("Fast Attack", true, function(v)
    _G.Config.FastAttack = v
end)

local VisualsTab = Win:Tab("Visuals")
VisualsTab:Toggle("Player/Mob ESP", false, function(v)
    _G.Config.ESP = v
end)
VisualsTab:Toggle("Fruit ESP", false, function(v)
    _G.Config.FruitESP = v
end)

local StatsTab = Win:Tab("Stats")
StatsTab:Dropdown("Select Stat", {"Melee", "Defense", "Sword", "Gun", "Demon Fruit"}, function(v)
    _G.Config.SelectedStat = v
end)
StatsTab:Toggle("Auto Upgrade", false, function(v)
    _G.Config.AutoStats = v
end)

--// LOGIC
task.spawn(function()
    while true do
        task.wait()
        if StatusBar then StatusBar.Text = "Status: " .. CurrentStatus end
        
        if _G.Config.AutoFarm then
            local Quest = CheckQuest()
            if Quest then
                UpdateStatus("Quest: " .. Quest.Quest)
                
                local MyQuest = Player.PlayerGui.Main.Quest
                if not MyQuest.Visible then
                    -- Take Quest
                    local NPC = workspace.NPCs:FindFirstChild(Quest.NPC)
                    if NPC then
                        local dist = (Player.Character.HumanoidRootPart.Position - NPC.HumanoidRootPart.Position).Magnitude
                        if dist > 3000 then
                            -- Teleport Bypass
                            UpdateStatus("Teleporting to Island...")
                            Tween(NPC.HumanoidRootPart.CFrame)
                        else
                            Tween(NPC.HumanoidRootPart.CFrame * CFrame.new(0,0,3))
                            if dist < 5 then
                                ReplicatedStorage.Remotes.CommF_:InvokeServer("StartQuest", Quest.Quest, 1)
                            end
                        end
                    end
                else
                    -- Kill
                    local TargetName = Quest.Mob
                    UpdateStatus("Hunting: " .. TargetName)
                    
                    local Target = nil
                    for _, v in pairs(workspace.Enemies:GetChildren()) do
                        if v.Name == TargetName and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                            Target = v
                            break
                        end
                    end
                    
                    if Target then
                        local TargetCF = Target.HumanoidRootPart.CFrame * CFrame.new(0, 20, 0) * CFrame.Angles(math.rad(-90), 0, 0)
                        Tween(TargetCF)
                        
                        -- Equip
                        EquipWeapon(_G.Config.SelectedWeapon)
                        
                        -- Aura/Magnet
                        for _, mob in pairs(workspace.Enemies:GetChildren()) do
                            if mob.Name == TargetName and (mob.HumanoidRootPart.Position - Target.HumanoidRootPart.Position).Magnitude < 300 then
                                mob.HumanoidRootPart.CFrame = Target.HumanoidRootPart.CFrame
                                mob.HumanoidRootPart.CanCollide = false
                                mob.Humanoid.WalkSpeed = 0
                            end
                        end
                        
                        -- Attack
                        if (Player.Character.HumanoidRootPart.Position - Target.HumanoidRootPart.Position).Magnitude < 25 then
                             VirtualUser:CaptureController()
                             VirtualUser:ClickButton1(Vector2.new(851, 158), workspace.Camera.CFrame)
                             ReplicatedStorage.Remotes.CommF_:InvokeServer("Buso")
                        end
                    else
                        UpdateStatus("Waiting for Mobs...")
                    end
                end
            end
        else
            UpdateStatus("Idle")
        end
    end
end)

--// ESP LOOP
task.spawn(function()
    while true do
        task.wait(0.1)
        if _G.Config.ESP then
            for _, v in pairs(workspace.Enemies:GetChildren()) do
                if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                    if not v:FindFirstChild("VetaESP") then
                        -- Billboard
                        local bg = Instance.new("BillboardGui")
                        bg.Name = "VetaESP"
                        bg.Adornee = v.Head
                        bg.Size = UDim2.new(0, 100, 0, 50)
                        bg.StudsOffset = Vector3.new(0, 2, 0)
                        bg.AlwaysOnTop = true
                        bg.Parent = v
                        
                        local text = Instance.new("TextLabel")
                        text.Parent = bg
                        text.BackgroundTransparency = 1
                        text.Size = UDim2.new(1, 0, 1, 0)
                        text.TextColor3 = Color3.new(1, 0, 0)
                        text.TextStrokeTransparency = 0
                        text.TextSize = 12
                        text.Name = "Label"
                    else
                        local dist = math.floor((Player.Character.HumanoidRootPart.Position - v.HumanoidRootPart.Position).Magnitude)
                        v.VetaESP.Label.Text = v.Name .. " [" .. dist .. "m]\nHP: " .. math.floor(v.Humanoid.Health)
                    end
                end
            end
        else
            -- Cleanup
             for _, v in pairs(workspace.Enemies:GetChildren()) do
                if v:FindFirstChild("VetaESP") then v.VetaESP:Destroy() end
             end
        end
    end
end)
